<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Java String Pool | 超低空飞行</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'c6f0c260532d55a972b0f00605f522e9';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java String Pool</h1><a id="logo" href="/.">超低空飞行</a><p class="description">一个理想主义者</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Java String Pool</h1><div class="post-meta">Apr 25, 2016<span> | </span><span class="category"><a href="/categories/计算机/">计算机</a></span></div><div class="post-content"><p>String a = “a” + “bc”;<br>String b = “ab” + “c”;</p>
<p>if ( a == b )<br>{
    System.out.println( “a equals to b” );<br>}
else<br>{
    System.out.println( “a not equals to b” );<br>}</p>
<p>//print:a equals to b</p>
<p>再看：</p>
<p>String a = new String( “abc” );<br>String b = new String( “abc” );</p>
<p>if ( a == b )<br>{
    System.out.println( “a equals to b” );<br>}
else<br>{
    System.out.println( “a not equals to b” );<br>}</p>
<p>//print:a not equals to b</p>
<p>为什么是这样的结果呢？a和b分明是不同的两个变量。直接用常量赋值和用new创建对象产生两种结果，引用stackoverflow里的一段回答：</p>
<blockquote>
<p>The string pool allows string constants to be reused, which is possible because strings in Java are immutable. If you repeat the same string constant all over the place in your Java code, you can actually have only one copy of that string in your system, which is one of the advantages of this mechanism. When you use <code>String s = &quot;string constant&quot;;</code> you get the copy that is in the string pool. However, when you do <code>String s = new String(&quot;string constant&quot;);</code> you force a copy to be allocated.</p>
</blockquote>
<p>为了省点空间，Java里有个String pool的概念。 另外，明确一点，”==”操作符，如果比较的是两个对象，则比较的是两个对象的”地址”是否一样，而String的自带重写方法equals比较的是String的内容，equals方法的源码如下：</p>
<p>public boolean equals(Object anObject) {<br>        if (this == anObject) {<br>            return true;<br>        }<br>        if (anObject instanceof String) {<br>            String anotherString = (String) anObject;<br>            int n = value.length;<br>            if (n == anotherString.value.length) {<br>                char v1[] = value;<br>                char v2[] = anotherString.value;<br>                int i = 0;<br>                while (n– != 0) {<br>                    if (v1[i] != v2[i])
                            return false;<br>                    i++;<br>                }<br>                return true;<br>            }<br>        }<br>        return false;<br>    }</p>
<p>所以，可以得出这样的结论，两个String变量a、b，如果( a == b )，则字符串内容一定相等，如果( a != b )，则字符串内容也可能相等。 参考地址：</p>
<h3 id="What-is-the-Java-string-pool-and-how-is-“s”-different-from-new-String-“s”"><a href="#What-is-the-Java-string-pool-and-how-is-“s”-different-from-new-String-“s”" class="headerlink" title="What is the Java string pool and how is “s” different from new String(“s”)?"></a><a href="http://stackoverflow.com/questions/2486191/what-is-the-java-string-pool-and-how-is-s-different-from-new-strings" target="_blank" rel="noopener">What is the Java string pool and how is “s” different from new String(“s”)?</a></h3><h3 id="What-is-String-pool-in-Java-duplicate"><a href="#What-is-String-pool-in-Java-duplicate" class="headerlink" title="What is String pool in Java? [duplicate]"></a><a href="http://stackoverflow.com/questions/3801343/what-is-string-pool-in-java" target="_blank" rel="noopener">What is String pool in Java? [duplicate]</a></h3></div><div class="tags"><a href="/tags/String/">String</a><a href="/tags/String-pool/">String pool</a></div><div class="post-nav"><a class="pre" href="/2016/04/25/java-e6-95-b0-e5-ad-97-e5-8c-85-e8-a3-85-e7-b1-bb/">Java数字包装类</a><a class="next" href="/2015/12/21/java-e4-b8-ad-e7-9a-84-e6-93-8d-e4-bd-9c-e7-ac-a6-e9-87-8d-e8-bd-bd/">Java中的操作符重载</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="http://smilealgernon.github.io"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/扯淡/">扯淡</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/电影/">电影</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机/">计算机</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/dos/" style="font-size: 15px;">dos</a> <a href="/tags/link/" style="font-size: 15px;">link</a> <a href="/tags/masm/" style="font-size: 15px;">masm</a> <a href="/tags/virtualbox/" style="font-size: 15px;">virtualbox</a> <a href="/tags/安装/" style="font-size: 15px;">安装</a> <a href="/tags/软盘/" style="font-size: 15px;">软盘</a> <a href="/tags/objective-c/" style="font-size: 15px;">objective-c</a> <a href="/tags/debugbox/" style="font-size: 15px;">debugbox</a> <a href="/tags/classpath/" style="font-size: 15px;">classpath</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/操作符重载/" style="font-size: 15px;">操作符重载</a> <a href="/tags/NullPoiterException/" style="font-size: 15px;">NullPoiterException</a> <a href="/tags/异常，空指针/" style="font-size: 15px;">异常，空指针</a> <a href="/tags/floppy/" style="font-size: 15px;">floppy</a> <a href="/tags/线程/" style="font-size: 15px;">线程</a> <a href="/tags/String/" style="font-size: 15px;">String</a> <a href="/tags/Jar/" style="font-size: 15px;">Jar</a> <a href="/tags/Java-Integer-Cache/" style="font-size: 15px;">Java Integer Cache</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/finder/" style="font-size: 15px;">finder</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/String-pool/" style="font-size: 15px;">String pool</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/rabbitmq/" style="font-size: 15px;">rabbitmq</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/数组/" style="font-size: 15px;">数组</a> <a href="/tags/wordpress/" style="font-size: 15px;">wordpress</a> <a href="/tags/插件/" style="font-size: 15px;">插件</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/06/16/hexo + github-pages/">使用hexo和github pages搭建博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/16/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/09/e8-b6-85-e6-97-b6-e7-a9-ba-e6-8e-a5-e8-a7-a6/">超时空接触</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/30/e6-a0-91-e8-8e-93-e6-b4-be-e5-ae-89-e8-a3-85/">树莓派安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/e5-89-8d-e7-ab-af-e8-b0-83-e9-a1-b5-e9-9d-a2-e6-9d-82-e8-b0-88/">前端调页面杂谈</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/18/e6-80-bb-e6-9c-89-e4-b8-80-e5-a4-a9-ef-bc-8c-e6-88-91-e8-a6-81-e6-8a-8a-e8-87-aa-e5-b7-b1-e7-9a-84-e6-91-a9-e6-89-98-e8-bd-a6-e6-8b-86-e6-8e-89-e7-9c-8b-e4-b8-aa-e7-a9-b6-e7-ab-9f/">总有一天，我要把自己的摩托车拆掉看个究竟</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/11/245/">咖啡馆随想</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/11/e9-9b-a8/">雨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/12/e4-bd-bf-e7-94-a8apt-get-e5-ae-89-e8-a3-85php7/">使用apt-get安装PHP7</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/11/e8-a7-a3-e5-86-b3vsftp-e4-b8-8d-e8-83-bd-e7-99-bb-e5-bd-95-e7-9a-84-e9-97-ae-e9-a2-98/">解决vsftp不能登录的问题</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">超低空飞行.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>